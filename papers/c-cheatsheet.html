<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>c language cheatsheet</title>
    <link rel="stylesheet" href="../s.css">
    <style>
        /* paper specific styles */
        .paper-content {
            max-width: 540px;
            margin: 0 auto;
            text-align: left;
        }

        .paper-meta {
            text-align: center;
            color: var(--subtext);
            font-size: 0.8rem;
            margin: 2rem 0;
            letter-spacing: 0.1em;
        }

        .section-content {
            margin: 1rem 0;
        }

        .code {
            background: var(--sapphire);
            padding: 1.2rem;
            border-radius: 2px;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre;
        }

        .note {
            background: var(--lavender);
            padding: 1rem;
            border-radius: 2px;
            margin: 1rem 0;
            font-size: 0.85rem;
        }

        .warning {
            background: var(--peach);
            padding: 1rem;
            border-radius: 2px;
            margin: 1rem 0;
            font-size: 0.85rem;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.85rem;
        }

        .table th, .table td {
            padding: 0.5rem;
            text-align: left;
            border-bottom: 1px solid var(--surface);
        }

        .table th {
            color: var(--subtext);
            font-weight: normal;
            letter-spacing: 0.1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="navbar"></div>

        <div class="paper-content">
            <h1>c language cheatsheet</h1>
            
            <div class="paper-meta">
                published: 2024 â€• last updated: 2024
            </div>

            <div class="paper-section">
                <h2>data types and sizes</h2>
                
                <div class="table">
                    <table>
                        <tr>
                            <th>type</th>
                            <th>size</th>
                            <th>range</th>
                        </tr>
                        <tr>
                            <td>char</td>
                            <td>1 byte</td>
                            <td>-128 to 127</td>
                        </tr>
                        <tr>
                            <td>unsigned char</td>
                            <td>1 byte</td>
                            <td>0 to 255</td>
                        </tr>
                        <tr>
                            <td>short</td>
                            <td>2 bytes</td>
                            <td>-32,768 to 32,767</td>
                        </tr>
                        <tr>
                            <td>int</td>
                            <td>4 bytes</td>
                            <td>-2^31 to 2^31-1</td>
                        </tr>
                        <tr>
                            <td>long</td>
                            <td>8 bytes</td>
                            <td>-2^63 to 2^63-1</td>
                        </tr>
                        <tr>
                            <td>float</td>
                            <td>4 bytes</td>
                            <td>~7 digits precision</td>
                        </tr>
                        <tr>
                            <td>double</td>
                            <td>8 bytes</td>
                            <td>~15 digits precision</td>
                        </tr>
                    </table>
                </div>

                <div class="note">
                    sizes may vary by platform. use sizeof() for portable code.
                </div>
            </div>

            <div class="paper-section">
                <h2>pointers</h2>
                
                <div class="code">
// pointer declaration and initialization
int *ptr = NULL;
int value = 42;
ptr = &value;

// pointer arithmetic
ptr++;      // next integer
ptr += 2;   // skip two integers
ptr--;      // previous integer

// dereferencing
*ptr = 100;  // change value
int x = *ptr; // read value

// function pointers
void (*fp)(int) = &some_function;
fp(42);  // call through pointer</div>

                <div class="warning">
                    always initialize pointers to NULL if not immediately assigning a valid address.
                </div>

                <div class="note">
                    pointer arithmetic is scaled by the size of the pointed type:
                    <div class="code">
char *p1;    // p1 + 1 adds 1 byte
int *p2;     // p2 + 1 adds 4 bytes
double *p3;  // p3 + 1 adds 8 bytes</div>
                </div>
            </div>

            <div class="paper-section">
                <h2>memory management</h2>

                <div class="code">
// dynamic allocation
int *arr = malloc(10 * sizeof(int));
if (arr == NULL) {
    // handle error
}

// reallocation
arr = realloc(arr, 20 * sizeof(int));
if (arr == NULL) {
    // handle error
}

// free memory
free(arr);
arr = NULL;  // prevent use after free</div>

                <div class="note">
                    common allocation functions:
                    - malloc(): raw allocation
                    - calloc(): zero-initialized allocation
                    - realloc(): resize allocation
                    - free(): release memory
                </div>

                <div class="warning">
                    memory leaks occur when:
                    - allocated memory is not freed
                    - losing the last pointer to allocated memory
                    - overwriting pointer without freeing
                </div>
            </div>

            <div class="paper-section">
                <h2>structs and unions</h2>

                <div class="code">
// struct definition
struct Point {
    int x;
    int y;
    char label[20];
};

// union definition
union Data {
    int i;
    float f;
    char str[20];
};

// typedef for convenience
typedef struct Point Point;

// initialization
Point p = {.x = 10, .y = 20};
Point *pp = &p;
pp->x = 30;  // arrow operator</div>

                <div class="note">
                    struct padding and alignment:
                    - members are aligned based on their size
                    - padding may be inserted between members
                    - use #pragma pack to control alignment
                </div>
            </div>

            <div class="paper-section">
                <h2>preprocessor directives</h2>

                <div class="code">
#define MAX(a,b) ((a) > (b) ? (a) : (b))
#define SQUARE(x) ((x) * (x))
#define PI 3.14159

#ifdef DEBUG
    // debug code
#endif

#ifndef HEADER_H
#define HEADER_H
    // header content
#endif

#pragma once  // header guard (modern)</div>

                <div class="warning">
                    macro pitfalls:
                    - side effects in arguments
                    - operator precedence issues
                    - multiple evaluation of arguments
                </div>
            </div>

            <div class="paper-section">
                <h2>bit manipulation</h2>

                <div class="code">
// bitwise operators
x & y    // AND
x | y    // OR
x ^ y    // XOR
~x       // NOT
x << n   // left shift
x >> n   // right shift

// common operations
n & (n-1)    // clear lowest set bit
n & -n       // isolate lowest set bit
x | (1 << n) // set nth bit
x & ~(1 << n) // clear nth bit
x ^ (1 << n) // toggle nth bit
(x >> n) & 1 // test nth bit</div>
            </div>

            <div class="paper-section">
                <h2>function prototypes</h2>

                <div class="code">
// basic function
return_type function_name(parameter_list);

// variadic functions
int printf(const char *format, ...);

// function pointer types
typedef void (*callback_t)(void *);

// inline functions
static inline int min(int a, int b) {
    return a < b ? a : b;
}</div>
            </div>

            <div class="paper-section">
                <h2>undefined behavior</h2>

                <div class="warning">
                    common cases:
                    - null pointer dereference
                    - buffer overflow
                    - use after free
                    - signed integer overflow
                    - uninitialized variable use
                    - array bounds violation
                    - strict aliasing violation
                </div>
            </div>

        </div>

        <div id="footer"></div>
    </div>
    <script src="../components.js"></script>
</body>
</html>